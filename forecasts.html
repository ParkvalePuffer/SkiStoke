<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Snow Forecasts - SkiStoke</title>
  <meta name="description" content="Real-time 7-day snow forecasts at resort elevations for ski destinations worldwide. Plan your next powder day with accurate snow predictions.">
  <link rel="stylesheet" href="style.css">
  <link rel="icon" type="image/x-icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>‚ùÑÔ∏è</text></svg>">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  
  <!-- Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-97XP61EN6J"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-97XP61EN6J');
  </script>
</head>
<body>
  <div class="container">
    <!-- Navigation -->
    <nav class="main-nav">
      <div class="nav-content">
        <div class="nav-brand">
          <h1>‚ùÑÔ∏è SkiStoke</h1>
        </div>
        <div class="nav-links">
          <a href="index.html" class="nav-link">Home</a>
          <a href="about.html" class="nav-link">About Us</a>
          <a href="forecasts.html" class="nav-link active">Forecasts</a>
          <a href="live-feeds.html" class="nav-link">Live Feeds</a>
        </div>
      </div>
    </nav>

    <!-- Page Header -->
    <section class="page-header">
      <div class="page-header-content">
        <h1>Snow Forecasts</h1>
        <p>7-day snow accumulation forecasts at resort elevations</p>
      </div>
    </section>

    <!-- Controls Section -->
    <section class="controls">
      <div class="control-buttons">
        <button id="refreshBtn" aria-label="Refresh weather forecast data" onclick="trackRefreshForecasts()">
          üîÑ Refresh All Forecasts
        </button>
      </div>
    </section>

    <!-- Forecast Container -->
    <section class="forecast-container">
      <div id="loading" class="loading hidden">
        <div class="spinner"></div>
        <p>Fetching latest snow forecasts...</p>
      </div>

      <div id="forecast-table" class="forecast-table">
        <h2>7-Day Snow Forecast at Resort Elevations</h2>
        <div class="table-wrapper">
          <table id="snow-table">
            <thead>
              <tr>
                <th>Ski Resort</th>
                <th id="day-1">Loading...</th>
                <th id="day-2">Loading...</th>
                <th id="day-3">Loading...</th>
                <th id="day-4">Loading...</th>
                <th id="day-5">Loading...</th>
                <th id="day-6">Loading...</th>
                <th id="day-7">Loading...</th>
              </tr>
            </thead>
            <tbody id="snow-table-body">
              <!-- Rows will be populated by JavaScript -->
            </tbody>
          </table>
        </div>
        
        <div class="forecast-summary">
          <h3>7-Day Snowfall Summary</h3>
          <div class="summary-grid" id="summary-grid">
            <!-- Summary bars will be populated by JavaScript -->
          </div>
        </div>
        
        <div class="legend">
          <h3>Snow Chart Legend</h3>
          <div class="legend-items">
            <div class="legend-item">
              <div class="legend-chart">
                <div class="legend-bar" style="height: 0%; background: #ff6b6b;"></div>
                <div class="legend-bar" style="height: 0%; background: #ff6b6b;"></div>
                <div class="legend-bar" style="height: 0%; background: #ff6b6b;"></div>
              </div>
              <span>No Snow (0 cm)</span>
            </div>
            <div class="legend-item">
              <div class="legend-chart">
                <div class="legend-bar" style="height: 30%; background: #ffa726;"></div>
                <div class="legend-bar" style="height: 20%; background: #ffa726;"></div>
                <div class="legend-bar" style="height: 25%; background: #ffa726;"></div>
              </div>
              <span>Light Snow (0-2 cm)</span>
            </div>
            <div class="legend-item">
              <div class="legend-chart">
                <div class="legend-bar" style="height: 50%; background: #ffa726;"></div>
                <div class="legend-bar" style="height: 40%; background: #ffa726;"></div>
                <div class="legend-bar" style="height: 45%; background: #ffa726;"></div>
              </div>
              <span>Medium Snow (2-5 cm)</span>
            </div>
            <div class="legend-item">
              <div class="legend-chart">
                <div class="legend-bar" style="height: 70%; background: #66bb6a;"></div>
                <div class="legend-bar" style="height: 60%; background: #66bb6a;"></div>
                <div class="legend-bar" style="height: 65%; background: #66bb6a;"></div>
              </div>
              <span>Heavy Snow (5-10 cm)</span>
            </div>
            <div class="legend-item">
              <div class="legend-chart">
                <div class="legend-bar" style="height: 90%; background: #1976d2;"></div>
                <div class="legend-bar" style="height: 80%; background: #1976d2;"></div>
                <div class="legend-bar" style="height: 85%; background: #1976d2;"></div>
              </div>
              <span>Very Heavy Snow (10+ cm)</span>
            </div>
          </div>
          
          <div class="time-periods-info">
            <h4>Time Periods</h4>
            <div class="time-periods-grid">
              <div class="time-period-item">
                <div class="time-period-bar" style="background: #1976d2;"></div>
                <span>Morning (6am-12pm)</span>
              </div>
              <div class="time-period-item">
                <div class="time-period-bar" style="background: #1976d2;"></div>
                <span>Afternoon (12pm-6pm)</span>
              </div>
              <div class="time-period-item">
                <div class="time-period-bar" style="background: #1976d2;"></div>
                <span>Nighttime (6pm-6am)</span>
              </div>
            </div>
            <p class="time-periods-note">
              <small>Bar heights show snow intensity during each time period. Colors indicate total daily snowfall.</small>
            </p>
          </div>
          
          <div class="data-sources-info">
            <h4>Data Sources</h4>
            <div class="data-sources-grid">
              <div class="data-source-item">
                <strong>GFS</strong> - Global Forecast System (NOAA)
                <br><small>High-resolution global weather model</small>
              </div>
              <div class="data-source-item">
                <strong>Open-Meteo</strong> - European weather model
                <br><small>Regional European forecasting system</small>
              </div>
            </div>
            <p class="data-sources-note">
              <small>We use the best available data source for each resort. GFS is preferred when available, with Open-Meteo as fallback.</small>
            </p>
          </div>
        </div>
      </div>

      <div id="error-message" class="error-message hidden">
        <p>‚ùå Error loading weather data. Please try again.</p>
      </div>
    </section>

    <!-- Footer -->
    <footer class="main-footer">
      <div class="footer-content">
        <div class="footer-brand">
          <h3>‚ùÑÔ∏è SkiStoke</h3>
          <p>Your ultimate snow forecast destination</p>
        </div>
        <div class="footer-links">
          <div class="footer-section">
            <h4>Navigation</h4>
            <a href="index.html">Home</a>
            <a href="about.html">About Us</a>
            <a href="forecasts.html">Forecasts</a>
            <a href="live-feeds.html">Live Feeds</a>
          </div>
          <div class="footer-section">
            <h4>Resources</h4>
            <a href="#">Weather Data</a>
            <a href="#">API Documentation</a>
            <a href="#">Support</a>
          </div>
        </div>
      </div>
      <div class="footer-bottom">
        <p>&copy; 2025 SkiStoke. Powered by Open-Meteo weather data.</p>
      </div>
    </footer>
  </div>

  <script src="js/app.js"></script>
  
  <script>
    // Track forecast refresh events
    function trackRefreshForecasts() {
      if (typeof gtag !== 'undefined') {
        gtag('event', 'forecast_refresh', {
          'event_category': 'forecasts',
          'event_label': 'manual_refresh',
          'value': 1
        });
      }
      
      // Trigger the actual refresh functionality
      const refreshBtn = document.getElementById('refreshBtn');
      if (refreshBtn && window.skiStokeApp) {
        window.skiStokeApp.refreshAllForecasts();
      }
    }
  </script>
</body>
</html>
